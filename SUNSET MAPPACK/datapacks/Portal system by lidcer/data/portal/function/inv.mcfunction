execute if score elevator_arrival time matches 0 if score elevator_departure time matches 0 if entity @e[type=minecraft:item,nbt={Item:{id:"minecraft:carrot_on_a_stick",components:{"minecraft:custom_data":{mp5:1}}}}] as @a[tag=!menu.pause,tag=!blackscreen,tag=!kill_anim,tag=!killed,tag=!goo_killed,tag=!itempicker_activated,limit=1,nbt={OnGround:1b}] at @s run function portal:pause
kill @e[type=minecraft:item]
execute if entity @s[nbt=!{Inventory:[{id:"minecraft:leather_helmet",components:{"minecraft:custom_data":{portalgunmodel:1b}},Slot:-106b}]}] run clear @s minecraft:leather_helmet
item replace entity @s armor.head with minecraft:red_stained_glass[minecraft:custom_model_data=6,minecraft:custom_name='""',minecraft:enchantments={levels:{"minecraft:binding_curse":1}},minecraft:unbreakable={}]

execute if entity @s[tag=!itempicker_activated,nbt=!{Inventory:[{id:"minecraft:leather_helmet",components:{"minecraft:custom_data":{portalgunmodel:1b}},Slot:-106b}]}] run item replace entity @s weapon.offhand with minecraft:leather_helmet[minecraft:custom_model_data=15,minecraft:custom_name='""',minecraft:dyed_color={rgb:8388641},minecraft:custom_data={portalgunmodel:1b}]
execute if entity @s[tag=itempicker_activated,nbt=!{Inventory:[{id:"minecraft:leather_helmet",components:{"minecraft:custom_data":{portalgunmodel:1b}},Slot:-106b}]}] run item replace entity @s weapon.offhand with minecraft:leather_helmet[minecraft:custom_model_data=2,minecraft:custom_name='""',minecraft:dyed_color={rgb:838808001},minecraft:custom_data={portalgunmodel:1b}]

execute if entity @s[nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",components:{"minecraft:custom_data":{Tags:["itempicker"]}}}}] run tag @s add gun_drop
execute if entity @s[nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",components:{"minecraft:custom_data":{Tags:["itempicker"]}}}}] run clear @s minecraft:carrot_on_a_stick


item replace entity @s[tag=!portalgun_anim,nbt={Inventory:[{id:"minecraft:leather_helmet",components:{"minecraft:custom_model_data":15,"minecraft:custom_data":{portalgunmodel:1b}},Slot:-106b}]}] weapon.mainhand with minecraft:carrot_on_a_stick[minecraft:custom_model_data=21,minecraft:custom_name='""',minecraft:unbreakable={},minecraft:custom_data={Tags:["itempicker"],mp5:1,mp6:1}]


execute if entity @s[tag=gun_drop,tag=!itempicker_activated,nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",components:{"minecraft:custom_data":{Tags:["itempicker"]}}}}] run item replace entity @s weapon.mainhand with minecraft:carrot_on_a_stick[minecraft:custom_model_data=21,minecraft:custom_name='""',minecraft:unbreakable={},minecraft:custom_data={Tags:["itempicker"],mp5:1,mp6:1}]
execute if entity @s[tag=gun_drop,tag=itempicker_activated,nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",components:{"minecraft:custom_data":{Tags:["itempicker"]}}}}] run item replace entity @s weapon.mainhand with minecraft:carrot_on_a_stick[minecraft:custom_model_data=3,minecraft:custom_name='""',minecraft:unbreakable={},minecraft:custom_data={Tags:["itempicker"]}]

item replace entity @s[scores={portalgun_anim_time=1..},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",components:{"minecraft:custom_model_data":3,"minecraft:custom_data":{Tags:["itempicker"]}}}}] weapon.mainhand with minecraft:carrot_on_a_stick[minecraft:custom_model_data=3,minecraft:custom_name='""',minecraft:unbreakable={},minecraft:custom_data={Tags:["itempicker"]}]


execute if entity @s[tag=itempicker_activated,tag=portalgun_anim_pick,scores={portalgun_anim_time=1}] run item replace entity @s container.8 with minecraft:carrot_on_a_stick[minecraft:custom_model_data=4,minecraft:custom_name='""',minecraft:unbreakable={},minecraft:custom_data={Tags:["itempicker","lightning"]}]
execute if entity @s[tag=itempicker_activated,tag=portalgun_anim_pick,scores={portalgun_anim_time=2}] run item replace entity @s container.8 with minecraft:carrot_on_a_stick[minecraft:custom_model_data=5,minecraft:custom_name='""',minecraft:unbreakable={},minecraft:custom_data={Tags:["itempicker","lightning"]}]
execute if entity @s[tag=itempicker_activated,tag=portalgun_anim_pick,scores={portalgun_anim_time=3}] run item replace entity @s container.8 with minecraft:carrot_on_a_stick[minecraft:custom_model_data=6,minecraft:custom_name='""',minecraft:unbreakable={},minecraft:custom_data={Tags:["itempicker","lightning"]}]
execute if entity @s[tag=itempicker_activated,tag=portalgun_anim_pick,scores={portalgun_anim_time=4}] run item replace entity @s container.8 with minecraft:carrot_on_a_stick[minecraft:custom_model_data=7,minecraft:custom_name='""',minecraft:unbreakable={},minecraft:custom_data={Tags:["itempicker","lightning"]}]
execute if entity @s[tag=itempicker_activated,tag=portalgun_anim_pick,scores={portalgun_anim_time=5}] run item replace entity @s container.8 with minecraft:carrot_on_a_stick[minecraft:custom_model_data=8,minecraft:custom_name='""',minecraft:unbreakable={},minecraft:custom_data={Tags:["itempicker","lightning"]}]
execute if entity @s[tag=itempicker_activated,tag=portalgun_anim_pick,scores={portalgun_anim_time=6}] run item replace entity @s container.8 with minecraft:carrot_on_a_stick[minecraft:custom_model_data=9,minecraft:custom_name='""',minecraft:unbreakable={},minecraft:custom_data={Tags:["itempicker","lightning"]}]
execute if entity @s[tag=itempicker_activated,tag=portalgun_anim_pick,scores={portalgun_anim_time=7}] run item replace entity @s container.8 with minecraft:carrot_on_a_stick[minecraft:custom_model_data=10,minecraft:custom_name='""',minecraft:unbreakable={},minecraft:custom_data={Tags:["itempicker","lightning"]}]
execute if entity @s[tag=itempicker_activated,tag=portalgun_anim_pick,scores={portalgun_anim_time=8..}] run item replace entity @s container.8 with minecraft:carrot_on_a_stick[minecraft:custom_model_data=11,minecraft:custom_name='""',minecraft:unbreakable={},minecraft:custom_data={Tags:["itempicker","lightning"]}]
execute if entity @s[tag=itempicker_activated,tag=!portalgun_anim_pick] run item replace entity @s container.8 with minecraft:carrot_on_a_stick[minecraft:custom_model_data=11,minecraft:custom_name='""',minecraft:unbreakable={},minecraft:custom_data={Tags:["itempicker","lightning"]}]


execute if entity @s[tag=itempicker_activated,tag=portalgun_anim_pick,scores={portalgun_anim_time=1}] run item replace entity @s container.7 with minecraft:carrot_on_a_stick[minecraft:custom_model_data=13,minecraft:custom_name='""',minecraft:unbreakable={},minecraft:custom_data={Tags:["itempicker","lightning"]}]
execute if entity @s[tag=itempicker_activated,tag=portalgun_anim_pick,scores={portalgun_anim_time=2}] run item replace entity @s container.7 with minecraft:carrot_on_a_stick[minecraft:custom_model_data=14,minecraft:custom_name='""',minecraft:unbreakable={},minecraft:custom_data={Tags:["itempicker","lightning"]}]
execute if entity @s[tag=itempicker_activated,tag=portalgun_anim_pick,scores={portalgun_anim_time=3}] run item replace entity @s container.7 with minecraft:carrot_on_a_stick[minecraft:custom_model_data=15,minecraft:custom_name='""',minecraft:unbreakable={},minecraft:custom_data={Tags:["itempicker","lightning"]}]
execute if entity @s[tag=itempicker_activated,tag=portalgun_anim_pick,scores={portalgun_anim_time=4}] run item replace entity @s container.7 with minecraft:carrot_on_a_stick[minecraft:custom_model_data=16,minecraft:custom_name='""',minecraft:unbreakable={},minecraft:custom_data={Tags:["itempicker","lightning"]}]
execute if entity @s[tag=itempicker_activated,tag=portalgun_anim_pick,scores={portalgun_anim_time=5}] run item replace entity @s container.7 with minecraft:carrot_on_a_stick[minecraft:custom_model_data=17,minecraft:custom_name='""',minecraft:unbreakable={},minecraft:custom_data={Tags:["itempicker","lightning"]}]
execute if entity @s[tag=itempicker_activated,tag=portalgun_anim_pick,scores={portalgun_anim_time=6}] run item replace entity @s container.7 with minecraft:carrot_on_a_stick[minecraft:custom_model_data=18,minecraft:custom_name='""',minecraft:unbreakable={},minecraft:custom_data={Tags:["itempicker","lightning"]}]
execute if entity @s[tag=itempicker_activated,tag=portalgun_anim_pick,scores={portalgun_anim_time=7}] run item replace entity @s container.7 with minecraft:carrot_on_a_stick[minecraft:custom_model_data=19,minecraft:custom_name='""',minecraft:unbreakable={},minecraft:custom_data={Tags:["itempicker","lightning"]}]
execute if entity @s[tag=itempicker_activated,tag=portalgun_anim_pick,scores={portalgun_anim_time=8..}] run item replace entity @s container.7 with minecraft:carrot_on_a_stick[minecraft:custom_model_data=20,minecraft:custom_name='""',minecraft:unbreakable={},minecraft:custom_data={Tags:["itempicker","lightning"]}]
execute if entity @s[tag=itempicker_activated,tag=!portalgun_anim_pick] run item replace entity @s container.7 with minecraft:carrot_on_a_stick[minecraft:custom_model_data=20,minecraft:custom_name='""',minecraft:unbreakable={},minecraft:custom_data={Tags:["itempicker","lightning"]}]

clear @s[tag=!itempicker_activated] minecraft:carrot_on_a_stick[minecraft:custom_data={Tags:["itempicker","lightning"]}]
execute if entity @s[tag=gun_drop,nbt={SelectedItem:{id:"minecraft:carrot_on_a_stick",components:{"minecraft:custom_data":{Tags:["itempicker"]}}}}] run tag @s[tag=gun_drop] remove gun_drop
scoreboard players set *coll_x_all main_score 0
scoreboard players set *coll_y_all main_score 0
scoreboard players set *coll_z_all main_score 0
scoreboard players set *coll_-x_all main_score 0
scoreboard players set *coll_-y_all main_score 0
scoreboard players set *coll_-z_all main_score 0

scoreboard players set *vector_y_all main_score 0
scoreboard players set *coll_-y_all2 main_score 0

scoreboard players set *vector_x main_score 0
scoreboard players set *vector_y main_score 0
scoreboard players set *vector_z main_score 0
scoreboard players set *vector2_x main_score 0
scoreboard players set *vector2_y main_score 0
scoreboard players set *vector2_z main_score 0

scoreboard players set *x_panel main_score 0
scoreboard players set *y_panel main_score 0
scoreboard players set *z_panel main_score 0


scoreboard players set *coll_pos_x main_score 0
scoreboard players set *coll_pos_y main_score -1
scoreboard players set *coll_pos_z main_score 0
execute positioned ~0.0 ~-0.5 ~0.0 run function physical_things:test_block
scoreboard players set *coll_pos_z main_score 1
execute positioned ~0.0 ~-0.4615 ~0.19175 run function physical_things:test_block
scoreboard players set *coll_pos_x main_score -1
execute positioned ~-0.07355 ~-0.4615 ~0.17695 run function physical_things:test_block
execute positioned ~-0.13535 ~-0.4615 ~0.1353 run function physical_things:test_block
execute positioned ~-0.177 ~-0.4615 ~0.0735 run function physical_things:test_block
scoreboard players set *coll_pos_z main_score 0
execute positioned ~-0.19175 ~-0.4615 ~0.0 run function physical_things:test_block
scoreboard players set *coll_pos_z main_score -1
execute positioned ~-0.177 ~-0.4615 ~-0.07355 run function physical_things:test_block
execute positioned ~-0.13535 ~-0.4615 ~-0.13535 run function physical_things:test_block
execute positioned ~-0.07355 ~-0.4615 ~-0.177 run function physical_things:test_block
scoreboard players set *coll_pos_x main_score 0
execute positioned ~0.0 ~-0.4615 ~-0.19175 run function physical_things:test_block
scoreboard players set *coll_pos_x main_score 1
execute positioned ~0.0735 ~-0.4615 ~-0.177 run function physical_things:test_block
execute positioned ~0.1353 ~-0.4615 ~-0.13535 run function physical_things:test_block
execute positioned ~0.17695 ~-0.4615 ~-0.07355 run function physical_things:test_block
scoreboard players set *coll_pos_z main_score 0
execute positioned ~0.19175 ~-0.4615 ~0.0 run function physical_things:test_block
scoreboard players set *coll_pos_z main_score 1
execute positioned ~0.17695 ~-0.4615 ~0.0735 run function physical_things:test_block
execute positioned ~0.1353 ~-0.4615 ~0.1353 run function physical_things:test_block
execute positioned ~0.0735 ~-0.4615 ~0.17695 run function physical_things:test_block
scoreboard players set *coll_pos_x main_score 0
execute positioned ~0.0 ~-0.3529 ~0.3529 run function physical_things:test_block
scoreboard players set *coll_pos_x main_score -1
execute positioned ~-0.13535 ~-0.3529 ~0.3257 run function physical_things:test_block
execute positioned ~-0.2491 ~-0.3529 ~0.24905 run function physical_things:test_block
execute positioned ~-0.32575 ~-0.3529 ~0.1353 run function physical_things:test_block
scoreboard players set *coll_pos_z main_score 0
execute positioned ~-0.3529 ~-0.3529 ~0.0 run function physical_things:test_block
scoreboard players set *coll_pos_z main_score -1
execute positioned ~-0.32575 ~-0.3529 ~-0.13535 run function physical_things:test_block
execute positioned ~-0.2491 ~-0.3529 ~-0.2491 run function physical_things:test_block
execute positioned ~-0.13535 ~-0.3529 ~-0.32575 run function physical_things:test_block
scoreboard players set *coll_pos_x main_score 0
execute positioned ~0.0 ~-0.3529 ~-0.3529 run function physical_things:test_block
scoreboard players set *coll_pos_x main_score 1
execute positioned ~0.1353 ~-0.3529 ~-0.32575 run function physical_things:test_block
execute positioned ~0.24905 ~-0.3529 ~-0.2491 run function physical_things:test_block
execute positioned ~0.3257 ~-0.3529 ~-0.13535 run function physical_things:test_block
scoreboard players set *coll_pos_z main_score 0
execute positioned ~0.3529 ~-0.3529 ~0.0 run function physical_things:test_block
scoreboard players set *coll_pos_z main_score 1
execute positioned ~0.3257 ~-0.3529 ~0.1353 run function physical_things:test_block
execute positioned ~0.24905 ~-0.3529 ~0.24905 run function physical_things:test_block
execute positioned ~0.1353 ~-0.3529 ~0.3257 run function physical_things:test_block
scoreboard players set *coll_pos_x main_score 0
execute positioned ~0.0 ~-0.19175 ~0.4615 run function physical_things:test_block
scoreboard players set *coll_pos_x main_score -1
execute positioned ~-0.177 ~-0.19175 ~0.42595 run function physical_things:test_block
execute positioned ~-0.32575 ~-0.19175 ~0.3257 run function physical_things:test_block
execute positioned ~-0.426 ~-0.19175 ~0.17695 run function physical_things:test_block
scoreboard players set *coll_pos_z main_score 0
execute positioned ~-0.4615 ~-0.19175 ~0.0 run function physical_things:test_block
scoreboard players set *coll_pos_z main_score -1
execute positioned ~-0.426 ~-0.19175 ~-0.177 run function physical_things:test_block
execute positioned ~-0.32575 ~-0.19175 ~-0.32575 run function physical_things:test_block
execute positioned ~-0.177 ~-0.19175 ~-0.426 run function physical_things:test_block
scoreboard players set *coll_pos_x main_score 0
execute positioned ~0.0 ~-0.19175 ~-0.4615 run function physical_things:test_block
scoreboard players set *coll_pos_x main_score 1
execute positioned ~0.17695 ~-0.19175 ~-0.426 run function physical_things:test_block
execute positioned ~0.3257 ~-0.19175 ~-0.32575 run function physical_things:test_block
execute positioned ~0.42595 ~-0.19175 ~-0.177 run function physical_things:test_block
scoreboard players set *coll_pos_z main_score 0
execute positioned ~0.4615 ~-0.19175 ~0.0 run function physical_things:test_block
scoreboard players set *coll_pos_z main_score 1
execute positioned ~0.42595 ~-0.19175 ~0.17695 run function physical_things:test_block
execute positioned ~0.3257 ~-0.19175 ~0.3257 run function physical_things:test_block
execute positioned ~0.17695 ~-0.19175 ~0.42595 run function physical_things:test_block
scoreboard players set *coll_pos_y main_score 0
scoreboard players set *coll_pos_x main_score 0
execute positioned ~0.0 ~0.0 ~0.5 run function physical_things:test_block
scoreboard players set *coll_pos_x main_score -1
execute positioned ~-0.19175 ~0.0 ~0.4615 run function physical_things:test_block
execute positioned ~-0.3529 ~0.0 ~0.3529 run function physical_things:test_block
execute positioned ~-0.4615 ~0.0 ~0.19175 run function physical_things:test_block
scoreboard players set *coll_pos_z main_score 0
execute positioned ~-0.5 ~0.0 ~0.0 run function physical_things:test_block
scoreboard players set *coll_pos_z main_score -1
execute positioned ~-0.4615 ~0.0 ~-0.19175 run function physical_things:test_block
execute positioned ~-0.3529 ~0.0 ~-0.3529 run function physical_things:test_block
execute positioned ~-0.19175 ~0.0 ~-0.4615 run function physical_things:test_block
scoreboard players set *coll_pos_x main_score 0
execute positioned ~0.0 ~0.0 ~-0.5 run function physical_things:test_block
scoreboard players set *coll_pos_x main_score 1
execute positioned ~0.19175 ~0.0 ~-0.4615 run function physical_things:test_block
execute positioned ~0.3529 ~0.0 ~-0.3529 run function physical_things:test_block
execute positioned ~0.4615 ~0.0 ~-0.19175 run function physical_things:test_block
scoreboard players set *coll_pos_z main_score 0
execute positioned ~0.5 ~0.0 ~0.0 run function physical_things:test_block
scoreboard players set *coll_pos_z main_score 1
execute positioned ~0.4615 ~0.0 ~0.19175 run function physical_things:test_block
execute positioned ~0.3529 ~0.0 ~0.3529 run function physical_things:test_block
execute positioned ~0.19175 ~0.0 ~0.4615 run function physical_things:test_block
scoreboard players set *coll_pos_y main_score 1
scoreboard players set *coll_pos_x main_score 0
execute positioned ~0.0 ~0.19175 ~0.4615 run function physical_things:test_block
scoreboard players set *coll_pos_x main_score -1
execute positioned ~-0.177 ~0.19175 ~0.42595 run function physical_things:test_block
execute positioned ~-0.32575 ~0.19175 ~0.3257 run function physical_things:test_block
execute positioned ~-0.426 ~0.19175 ~0.17695 run function physical_things:test_block
scoreboard players set *coll_pos_z main_score 0
execute positioned ~-0.4615 ~0.19175 ~0.0 run function physical_things:test_block
scoreboard players set *coll_pos_z main_score -1
execute positioned ~-0.426 ~0.19175 ~-0.177 run function physical_things:test_block
execute positioned ~-0.32575 ~0.19175 ~-0.32575 run function physical_things:test_block
execute positioned ~-0.177 ~0.19175 ~-0.426 run function physical_things:test_block
scoreboard players set *coll_pos_x main_score 0
execute positioned ~0.0 ~0.19175 ~-0.4615 run function physical_things:test_block
scoreboard players set *coll_pos_x main_score 1
execute positioned ~0.17695 ~0.19175 ~-0.426 run function physical_things:test_block
execute positioned ~0.3257 ~0.19175 ~-0.32575 run function physical_things:test_block
execute positioned ~0.42595 ~0.19175 ~-0.177 run function physical_things:test_block
scoreboard players set *coll_pos_z main_score 0
execute positioned ~0.4615 ~0.19175 ~0.0 run function physical_things:test_block
scoreboard players set *coll_pos_z main_score 1
execute positioned ~0.42595 ~0.19175 ~0.17695 run function physical_things:test_block
execute positioned ~0.3257 ~0.19175 ~0.3257 run function physical_things:test_block
execute positioned ~0.17695 ~0.19175 ~0.42595 run function physical_things:test_block
scoreboard players set *coll_pos_x main_score 0
execute positioned ~0.0 ~0.3529 ~0.3529 run function physical_things:test_block
scoreboard players set *coll_pos_x main_score -1
execute positioned ~-0.13535 ~0.3529 ~0.3257 run function physical_things:test_block
execute positioned ~-0.2491 ~0.3529 ~0.24905 run function physical_things:test_block
execute positioned ~-0.32575 ~0.3529 ~0.1353 run function physical_things:test_block
scoreboard players set *coll_pos_z main_score 0
execute positioned ~-0.3529 ~0.3529 ~0.0 run function physical_things:test_block
scoreboard players set *coll_pos_z main_score -1
execute positioned ~-0.32575 ~0.3529 ~-0.13535 run function physical_things:test_block
execute positioned ~-0.2491 ~0.3529 ~-0.2491 run function physical_things:test_block
execute positioned ~-0.13535 ~0.3529 ~-0.32575 run function physical_things:test_block
scoreboard players set *coll_pos_x main_score 0
execute positioned ~0.0 ~0.3529 ~-0.3529 run function physical_things:test_block
scoreboard players set *coll_pos_x main_score 1
execute positioned ~0.1353 ~0.3529 ~-0.32575 run function physical_things:test_block
execute positioned ~0.24905 ~0.3529 ~-0.2491 run function physical_things:test_block
execute positioned ~0.3257 ~0.3529 ~-0.13535 run function physical_things:test_block
scoreboard players set *coll_pos_z main_score 0
execute positioned ~0.3529 ~0.3529 ~0.0 run function physical_things:test_block
scoreboard players set *coll_pos_z main_score 1
execute positioned ~0.3257 ~0.3529 ~0.1353 run function physical_things:test_block
execute positioned ~0.24905 ~0.3529 ~0.24905 run function physical_things:test_block
execute positioned ~0.1353 ~0.3529 ~0.3257 run function physical_things:test_block
scoreboard players set *coll_pos_x main_score 0
execute positioned ~0.0 ~0.4615 ~0.19175 run function physical_things:test_block
scoreboard players set *coll_pos_x main_score -1
execute positioned ~-0.07355 ~0.4615 ~0.17695 run function physical_things:test_block
execute positioned ~-0.13535 ~0.4615 ~0.1353 run function physical_things:test_block
execute positioned ~-0.177 ~0.4615 ~0.0735 run function physical_things:test_block
scoreboard players set *coll_pos_z main_score 0
execute positioned ~-0.19175 ~0.4615 ~0.0 run function physical_things:test_block
scoreboard players set *coll_pos_z main_score -1
execute positioned ~-0.177 ~0.4615 ~-0.07355 run function physical_things:test_block
execute positioned ~-0.13535 ~0.4615 ~-0.13535 run function physical_things:test_block
execute positioned ~-0.07355 ~0.4615 ~-0.177 run function physical_things:test_block
scoreboard players set *coll_pos_x main_score 0
execute positioned ~0.0 ~0.4615 ~-0.19175 run function physical_things:test_block
scoreboard players set *coll_pos_x main_score 1
execute positioned ~0.0735 ~0.4615 ~-0.177 run function physical_things:test_block
execute positioned ~0.1353 ~0.4615 ~-0.13535 run function physical_things:test_block
execute positioned ~0.17695 ~0.4615 ~-0.07355 run function physical_things:test_block
scoreboard players set *coll_pos_z main_score 0
execute positioned ~0.19175 ~0.4615 ~0.0 run function physical_things:test_block
scoreboard players set *coll_pos_z main_score 1
execute positioned ~0.17695 ~0.4615 ~0.0735 run function physical_things:test_block
execute positioned ~0.1353 ~0.4615 ~0.1353 run function physical_things:test_block
execute positioned ~0.0735 ~0.4615 ~0.17695 run function physical_things:test_block
scoreboard players set *coll_pos_x main_score 0
scoreboard players set *coll_pos_z main_score 0
execute positioned ~0.0 ~0.5 ~0.0 run function physical_things:test_block




#execute store result score #x main_score run data get entity @s Pos[0] 1000
#execute store result score #y main_score run data get entity @s Pos[1] 1000
#execute store result score #z main_score run data get entity @s Pos[2] 1000
#scoreboard players operation #sphere_x main_score = #x main_score
#scoreboard players operation #sphere_y main_score = #y main_score
#scoreboard players operation #sphere_z main_score = #z main_score
#scoreboard players operation #sphere_x main_score /= #10 const
#scoreboard players operation #sphere_y main_score /= #10 const
#scoreboard players operation #sphere_z main_score /= #10 const

#tag @s add this.ball

#execute positioned ~0.5 ~0.5 ~-0.5 unless block ~ ~ ~ air align xyz run function physical_things:ball/collision
#execute positioned ~0.5 ~0.5 ~0.5 unless block ~ ~ ~ air align xyz run function physical_things:ball/collision
#execute positioned ~0.5 ~-0.5 ~-0.5 unless block ~ ~ ~ air align xyz run function physical_things:ball/collision
#execute positioned ~0.5 ~-0.5 ~0.5 unless block ~ ~ ~ air align xyz run function physical_things:ball/collision
#execute positioned ~-0.5 ~0.5 ~-0.5 unless block ~ ~ ~ air align xyz run function physical_things:ball/collision
#execute positioned ~-0.5 ~0.5 ~0.5 unless block ~ ~ ~ air align xyz run function physical_things:ball/collision
#execute positioned ~-0.5 ~-0.5 ~-0.5 unless block ~ ~ ~ air align xyz run function physical_things:ball/collision
#execute positioned ~-0.5 ~-0.5 ~0.5 unless block ~ ~ ~ air align xyz run function physical_things:ball/collision

#tag @s remove this.ball


execute unless score *coll_x_all main_score matches 49 if score *vector2_x main_score matches 1.. if score *x_panel main_score matches 1 run scoreboard players operation *vector2_x main_score /= #7 const
execute unless score *coll_y_all main_score matches 49 if score *vector2_y main_score matches 1.. if score *y_panel main_score matches 1 run scoreboard players operation *vector2_y main_score /= #7 const
execute unless score *coll_z_all main_score matches 49 if score *vector2_z main_score matches 1.. if score *z_panel main_score matches 1 run scoreboard players operation *vector2_z main_score /= #7 const
execute unless score *coll_-x_all main_score matches 49 if score *vector2_x main_score matches ..-1 if score *x_panel main_score matches 1 run scoreboard players operation *vector2_x main_score /= #7 const
execute unless score *coll_-y_all main_score matches 49 if score *vector2_y main_score matches ..-1 if score *y_panel main_score matches 1 run scoreboard players operation *vector2_y main_score /= #7 const
execute unless score *coll_-z_all main_score matches 49 if score *vector2_z main_score matches ..-1 if score *z_panel main_score matches 1 run scoreboard players operation *vector2_z main_score /= #7 const
scoreboard players operation *vector_x main_score += *vector2_x main_score
scoreboard players operation *vector_y main_score += *vector2_y main_score
scoreboard players operation *vector_z main_score += *vector2_z main_score


scoreboard players operation *vector_y_all main_score /= #2 const
scoreboard players operation *vector_y main_score /= *vector_y_all main_score

scoreboard players operation *vector_x main_score < #500 const
scoreboard players operation *vector_y main_score < #500 const
scoreboard players operation *vector_z main_score < #500 const
scoreboard players operation *vector_x main_score > #-500 const
scoreboard players operation *vector_y main_score > #-500 const
scoreboard players operation *vector_z main_score > #-500 const

scoreboard players operation @s physical_things.vx += *vector_x main_score
scoreboard players operation @s physical_things.vy += *vector_y main_score
scoreboard players operation @s physical_things.vz += *vector_z main_score

#tellraw @a[tag=coll_x_all] [{"score":{"name": "*coll_x_all","objective": "main_score"}}]
#tellraw @a[tag=coll_y_all] [{"score":{"name": "*coll_y_all","objective": "main_score"}}]
#tellraw @a[tag=coll_z_all] [{"score":{"name": "*coll_z_all","objective": "main_score"}}]

scoreboard players set #test main_score 0
execute if score *coll_-y_all main_score matches 48..49 if score *coll_-y_all2 main_score matches 48..49 run scoreboard players set #test main_score 1
execute if score #test main_score matches 1 unless score @s physical_things.vy matches ..-600 run scoreboard players remove @s physical_things.vy 3
execute if score #test main_score matches 1 unless score @s physical_things.air matches 0 run scoreboard players set @s physical_things.air 0
execute if score #test main_score matches 0 run function physical_things:ball/vec

#scoreboard players remove @s[scores={physical_things.vx=1..}] physical_things.vx 1
#scoreboard players remove @s[scores={physical_things.vy=1..}] physical_things.vy 1
#scoreboard players remove @s[scores={physical_things.vz=1..}] physical_things.vz 1
#scoreboard players add @s[scores={physical_things.vx=..-1}] physical_things.vx 1
#scoreboard players add @s[scores={physical_things.vy=..-1}] physical_things.vy 1
#scoreboard players add @s[scores={physical_things.vz=..-1}] physical_things.vz 1

execute if score *coll_x_all main_score matches 40..48 if score @s physical_things.vx matches 1.. run scoreboard players operation @s physical_things.vx /= #6 const
execute if score *coll_-x_all main_score matches 40..48 if score @s physical_things.vx matches ..-1 run function physical_things:ball/delenie/x

execute if score *coll_y_all main_score matches 40..48 if score @s physical_things.vy matches 1.. run scoreboard players operation @s physical_things.vy /= #6 const
execute if score *coll_-y_all main_score matches 40..48 if score @s physical_things.vy matches ..-1 run function physical_things:ball/delenie/y

execute if score *coll_z_all main_score matches 40..48 if score @s physical_things.vz matches 1.. run scoreboard players operation @s physical_things.vz /= #6 const
execute if score *coll_-z_all main_score matches 40..48 if score @s physical_things.vz matches ..-1 run function physical_things:ball/delenie/z


execute if score *coll_x_all main_score matches ..39 if score @s physical_things.vx matches 1.. run scoreboard players operation @s physical_things.vx /= #13 const
execute if score *coll_-x_all main_score matches ..39 if score @s physical_things.vx matches ..-1 run function physical_things:ball/delenie/x2

execute if score *coll_y_all main_score matches ..39 if score @s physical_things.vy matches 1.. run scoreboard players operation @s physical_things.vy /= #13 const
execute if score *coll_-y_all main_score matches ..39 if score @s physical_things.vy matches ..-1 run function physical_things:ball/delenie/y2

execute if score *coll_z_all main_score matches ..39 if score @s physical_things.vz matches 1.. run scoreboard players operation @s physical_things.vz /= #13 const
execute if score *coll_-z_all main_score matches ..39 if score @s physical_things.vz matches ..-1 run function physical_things:ball/delenie/z2

execute store result score #x main_score run data get entity @s Pos[0] 1000
execute store result score #y main_score run data get entity @s Pos[1] 1000
execute store result score #z main_score run data get entity @s Pos[2] 1000

#execute unless score @s physical_things.vx matches -1..1 run function physical_things:ball/x_0.99
#execute unless score @s physical_things.vz matches -1..1 run function physical_things:ball/z_0.99

scoreboard players operation @s[scores={physical_things.vx=701..}] physical_things.vx < #700 const
scoreboard players operation @s[scores={physical_things.vy=751..}] physical_things.vy < #750 const
scoreboard players operation @s[scores={physical_things.vz=701..}] physical_things.vz < #700 const
scoreboard players operation @s[scores={physical_things.vx=..-701}] physical_things.vx > #-700 const
scoreboard players operation @s[scores={physical_things.vy=..-751}] physical_things.vy > #-750 const
scoreboard players operation @s[scores={physical_things.vz=..-701}] physical_things.vz > #-700 const

scoreboard players operation #x main_score += @s physical_things.vx
scoreboard players operation #y main_score += @s physical_things.vy
scoreboard players operation #z main_score += @s physical_things.vz

execute store result entity @s Pos[0] double 0.001 run scoreboard players get #x main_score
execute store result entity @s Pos[1] double 0.001 run scoreboard players get #y main_score
execute store result entity @s Pos[2] double 0.001 run scoreboard players get #z main_score

execute at @s as @e[type=minecraft:area_effect_cloud,tag=physical_things.ball] if score @s physical_things.id = #id_test main_score run function physical_things:ball/tp_model